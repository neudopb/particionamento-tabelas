CREATE TABLE vendas (
    id BIGINT NOT NULL,
    produto VARCHAR(255),
    valor NUMERIC,
    data DATE,

    PRIMARY KEY(id, data)
) PARTITION BY RANGE(data);

CREATE SEQUENCE IF NOT EXISTS public.vendas_seq
    INCREMENT 50
    START 1
    MINVALUE 1
    MAXVALUE 9223372036854775807
    CACHE 1;

CREATE TABLE vendas_2023_01 PARTITION OF vendas
    FOR VALUES FROM ('2023-01-01') TO ('2023-02-01');

CREATE TABLE vendas_2023_02 PARTITION OF vendas
    FOR VALUES FROM ('2023-02-01') TO ('2023-03-01');

CREATE TABLE vendas_2023_03 PARTITION OF vendas
    FOR VALUES FROM ('2023-03-01') TO ('2023-04-01');

CREATE INDEX idx_vendas ON vendas (data);